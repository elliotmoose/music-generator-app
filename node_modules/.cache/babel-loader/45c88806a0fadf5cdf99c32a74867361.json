{"ast":null,"code":"import _classCallCheck from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Timeline } from \"./Timeline\";\nimport { assertRange } from \"./Debug\";\n/**\n * A Timeline State. Provides the methods: `setStateAtTime(\"state\", time)` and `getValueAtTime(time)`\n * @param initial The initial state of the StateTimeline.  Defaults to `undefined`\n */\n\nexport var StateTimeline = /*#__PURE__*/function (_Timeline) {\n  _inherits(StateTimeline, _Timeline);\n\n  var _super = _createSuper(StateTimeline);\n\n  function StateTimeline() {\n    var _this;\n\n    var initial = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"stopped\";\n\n    _classCallCheck(this, StateTimeline);\n\n    _this = _super.call(this);\n    _this.name = \"StateTimeline\";\n    _this._initial = initial;\n\n    _this.setStateAtTime(_this._initial, 0);\n\n    return _this;\n  }\n  /**\n   * Returns the scheduled state scheduled before or at\n   * the given time.\n   * @param  time  The time to query.\n   * @return  The name of the state input in setStateAtTime.\n   */\n\n\n  _createClass(StateTimeline, [{\n    key: \"getValueAtTime\",\n    value: function getValueAtTime(time) {\n      var event = this.get(time);\n\n      if (event !== null) {\n        return event.state;\n      } else {\n        return this._initial;\n      }\n    }\n    /**\n     * Add a state to the timeline.\n     * @param  state The name of the state to set.\n     * @param  time  The time to query.\n     * @param options Any additional options that are needed in the timeline.\n     */\n\n  }, {\n    key: \"setStateAtTime\",\n    value: function setStateAtTime(state, time, options) {\n      assertRange(time, 0);\n      this.add(Object.assign({}, options, {\n        state: state,\n        time: time\n      }));\n      return this;\n    }\n    /**\n     * Return the event before the time with the given state\n     * @param  state The state to look for\n     * @param  time  When to check before\n     * @return  The event with the given state before the time\n     */\n\n  }, {\n    key: \"getLastState\",\n    value: function getLastState(state, time) {\n      // time = this.toSeconds(time);\n      var index = this._search(time);\n\n      for (var i = index; i >= 0; i--) {\n        var event = this._timeline[i];\n\n        if (event.state === state) {\n          return event;\n        }\n      }\n    }\n    /**\n     * Return the event after the time with the given state\n     * @param  state The state to look for\n     * @param  time  When to check from\n     * @return  The event with the given state after the time\n     */\n\n  }, {\n    key: \"getNextState\",\n    value: function getNextState(state, time) {\n      // time = this.toSeconds(time);\n      var index = this._search(time);\n\n      if (index !== -1) {\n        for (var i = index; i < this._timeline.length; i++) {\n          var event = this._timeline[i];\n\n          if (event.state === state) {\n            return event;\n          }\n        }\n      }\n    }\n  }]);\n\n  return StateTimeline;\n}(Timeline);","map":{"version":3,"sources":["../../../../Tone/core/util/StateTimeline.ts"],"names":[],"mappings":";;;;AACA,SAAS,QAAT,QAAwC,YAAxC;AACA,SAAS,WAAT,QAA4B,SAA5B;AASA;;;AAGG;;AACH,WAAa,aAAb;AAAA;;AAAA;;AASC,2BAA8C;AAAA;;AAAA,QAAlC,OAAkC,uEAAT,SAAS;;AAAA;;AAC7C;AARQ,UAAA,IAAA,GAAe,eAAf;AASR,UAAK,QAAL,GAAgB,OAAhB;;AACA,UAAK,cAAL,CAAoB,MAAK,QAAzB,EAAmC,CAAnC;;AAH6C;AAI7C;AAED;;;;;AAKG;;;AApBJ;AAAA;AAAA,mCAqBgB,IArBhB,EAqB6B;AAC3B,UAAM,KAAK,GAAG,KAAK,GAAL,CAAS,IAAT,CAAd;;AACA,UAAI,KAAK,KAAK,IAAd,EAAoB;AACnB,eAAO,KAAK,CAAC,KAAb;AACA,OAFD,MAEO;AACN,eAAO,KAAK,QAAZ;AACA;AACD;AAED;;;;;AAKG;;AAnCJ;AAAA;AAAA,mCAoCgB,KApChB,EAoCsC,IApCtC,EAoCqD,OApCrD,EAoCgF;AAC9E,MAAA,WAAW,CAAC,IAAD,EAAO,CAAP,CAAX;AACA,WAAK,GAAL,CAAS,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,OAAlB,EAA2B;AACnC,QAAA,KAAK,EAAL,KADmC;AAEnC,QAAA,IAAI,EAAJ;AAFmC,OAA3B,CAAT;AAIA,aAAO,IAAP;AACA;AAED;;;;;AAKG;;AAlDJ;AAAA;AAAA,iCAmDc,KAnDd,EAmDoC,IAnDpC,EAmDgD;AAC9C;AACA,UAAM,KAAK,GAAG,KAAK,OAAL,CAAa,IAAb,CAAd;;AACA,WAAK,IAAI,CAAC,GAAG,KAAb,EAAoB,CAAC,IAAI,CAAzB,EAA4B,CAAC,EAA7B,EAAiC;AAChC,YAAM,KAAK,GAAG,KAAK,SAAL,CAAe,CAAf,CAAd;;AACA,YAAI,KAAK,CAAC,KAAN,KAAgB,KAApB,EAA2B;AAC1B,iBAAO,KAAP;AACA;AACD;AACD;AAED;;;;;AAKG;;AAnEJ;AAAA;AAAA,iCAoEc,KApEd,EAoEoC,IApEpC,EAoEgD;AAC9C;AACA,UAAM,KAAK,GAAG,KAAK,OAAL,CAAa,IAAb,CAAd;;AACA,UAAI,KAAK,KAAK,CAAC,CAAf,EAAkB;AACjB,aAAK,IAAI,CAAC,GAAG,KAAb,EAAoB,CAAC,GAAG,KAAK,SAAL,CAAe,MAAvC,EAA+C,CAAC,EAAhD,EAAoD;AACnD,cAAM,KAAK,GAAG,KAAK,SAAL,CAAe,CAAf,CAAd;;AACA,cAAI,KAAK,CAAC,KAAN,KAAgB,KAApB,EAA2B;AAC1B,mBAAO,KAAP;AACA;AACD;AACD;AACD;AA/EF;;AAAA;AAAA,EAAsE,QAAtE","sourceRoot":"","sourcesContent":["import { Timeline } from \"./Timeline\";\nimport { assertRange } from \"./Debug\";\n/**\n * A Timeline State. Provides the methods: `setStateAtTime(\"state\", time)` and `getValueAtTime(time)`\n * @param initial The initial state of the StateTimeline.  Defaults to `undefined`\n */\nexport class StateTimeline extends Timeline {\n    constructor(initial = \"stopped\") {\n        super();\n        this.name = \"StateTimeline\";\n        this._initial = initial;\n        this.setStateAtTime(this._initial, 0);\n    }\n    /**\n     * Returns the scheduled state scheduled before or at\n     * the given time.\n     * @param  time  The time to query.\n     * @return  The name of the state input in setStateAtTime.\n     */\n    getValueAtTime(time) {\n        const event = this.get(time);\n        if (event !== null) {\n            return event.state;\n        }\n        else {\n            return this._initial;\n        }\n    }\n    /**\n     * Add a state to the timeline.\n     * @param  state The name of the state to set.\n     * @param  time  The time to query.\n     * @param options Any additional options that are needed in the timeline.\n     */\n    setStateAtTime(state, time, options) {\n        assertRange(time, 0);\n        this.add(Object.assign({}, options, {\n            state,\n            time,\n        }));\n        return this;\n    }\n    /**\n     * Return the event before the time with the given state\n     * @param  state The state to look for\n     * @param  time  When to check before\n     * @return  The event with the given state before the time\n     */\n    getLastState(state, time) {\n        // time = this.toSeconds(time);\n        const index = this._search(time);\n        for (let i = index; i >= 0; i--) {\n            const event = this._timeline[i];\n            if (event.state === state) {\n                return event;\n            }\n        }\n    }\n    /**\n     * Return the event after the time with the given state\n     * @param  state The state to look for\n     * @param  time  When to check from\n     * @return  The event with the given state after the time\n     */\n    getNextState(state, time) {\n        // time = this.toSeconds(time);\n        const index = this._search(time);\n        if (index !== -1) {\n            for (let i = index; i < this._timeline.length; i++) {\n                const event = this._timeline[i];\n                if (event.state === state) {\n                    return event;\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=StateTimeline.js.map"]},"metadata":{},"sourceType":"module"}