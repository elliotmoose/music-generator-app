{"ast":null,"code":"import _toConsumableArray from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Gain } from \"../../core/context/Gain\";\nimport { connectSeries, ToneAudioNode } from \"../../core/context/ToneAudioNode\";\n/**\n * PhaseShiftAllpass is an very efficient implementation of a Hilbert Transform\n * using two Allpass filter banks whose outputs have a phase difference of 90째.\n * Here the `offset90` phase is offset by +90째 in relation to `output`.\n * Coefficients and structure was developed by Olli Niemitalo.\n * For more details see: http://yehar.com/blog/?p=368\n * @category Component\n */\n\nexport var PhaseShiftAllpass = /*#__PURE__*/function (_ToneAudioNode) {\n  _inherits(PhaseShiftAllpass, _ToneAudioNode);\n\n  var _super = _createSuper(PhaseShiftAllpass);\n\n  function PhaseShiftAllpass(options) {\n    var _this;\n\n    _classCallCheck(this, PhaseShiftAllpass);\n\n    _this = _super.call(this, options);\n    _this.name = \"PhaseShiftAllpass\";\n    _this.input = new Gain({\n      context: _this.context\n    });\n    /**\n     * The phase shifted output\n     */\n\n    _this.output = new Gain({\n      context: _this.context\n    });\n    /**\n     * The PhaseShifted allpass output\n     */\n\n    _this.offset90 = new Gain({\n      context: _this.context\n    });\n    var allpassBank1Values = [0.6923878, 0.9360654322959, 0.9882295226860, 0.9987488452737];\n    var allpassBank2Values = [0.4021921162426, 0.8561710882420, 0.9722909545651, 0.9952884791278];\n    _this._bank0 = _this._createAllPassFilterBank(allpassBank1Values);\n    _this._bank1 = _this._createAllPassFilterBank(allpassBank2Values);\n    _this._oneSampleDelay = _this.context.createIIRFilter([0.0, 1.0], [1.0, 0.0]); // connect Allpass filter banks\n\n    connectSeries.apply(void 0, [_this.input].concat(_toConsumableArray(_this._bank0), [_this._oneSampleDelay, _this.output]));\n    connectSeries.apply(void 0, [_this.input].concat(_toConsumableArray(_this._bank1), [_this.offset90]));\n    return _this;\n  }\n  /**\n   * Create all of the IIR filters from an array of values using the coefficient calculation.\n   */\n\n\n  _createClass(PhaseShiftAllpass, [{\n    key: \"_createAllPassFilterBank\",\n    value: function _createAllPassFilterBank(bankValues) {\n      var _this2 = this;\n\n      var nodes = bankValues.map(function (value) {\n        var coefficients = [[value * value, 0, -1], [1, 0, -(value * value)]];\n        return _this2.context.createIIRFilter(coefficients[0], coefficients[1]);\n      });\n      return nodes;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      _get(_getPrototypeOf(PhaseShiftAllpass.prototype), \"dispose\", this).call(this);\n\n      this.input.dispose();\n      this.output.dispose();\n      this.offset90.dispose();\n\n      this._bank0.forEach(function (f) {\n        return f.disconnect();\n      });\n\n      this._bank1.forEach(function (f) {\n        return f.disconnect();\n      });\n\n      this._oneSampleDelay.disconnect();\n\n      return this;\n    }\n  }]);\n\n  return PhaseShiftAllpass;\n}(ToneAudioNode);","map":{"version":3,"sources":["../../../../Tone/component/filter/PhaseShiftAllpass.ts"],"names":[],"mappings":";;;;;;;AAAA,SAAS,IAAT,QAAqB,yBAArB;AACA,SAAS,aAAT,EAAwB,aAAxB,QAAmE,kCAAnE;AAEA;;;;;;;AAOG;;AACH,WAAa,iBAAb;AAAA;;AAAA;;AA+BC,6BAAY,OAAZ,EAAmD;AAAA;;AAAA;;AAElD,8BAAM,OAAN;AA/BQ,UAAA,IAAA,GAAe,mBAAf;AAEA,UAAA,KAAA,GAAQ,IAAI,IAAJ,CAAS;AAAE,MAAA,OAAO,EAAE,MAAK;AAAhB,KAAT,CAAR;AAiBT;;AAEG;;AACM,UAAA,MAAA,GAAS,IAAI,IAAJ,CAAS;AAAE,MAAA,OAAO,EAAE,MAAK;AAAhB,KAAT,CAAT;AAET;;AAEG;;AACM,UAAA,QAAA,GAAW,IAAI,IAAJ,CAAS;AAAE,MAAA,OAAO,EAAE,MAAK;AAAhB,KAAT,CAAX;AAMR,QAAM,kBAAkB,GAAG,CAAC,SAAD,EAAY,eAAZ,EAA6B,eAA7B,EAA8C,eAA9C,CAA3B;AACA,QAAM,kBAAkB,GAAG,CAAC,eAAD,EAAkB,eAAlB,EAAmC,eAAnC,EAAoD,eAApD,CAA3B;AAEA,UAAK,MAAL,GAAc,MAAK,wBAAL,CAA8B,kBAA9B,CAAd;AACA,UAAK,MAAL,GAAc,MAAK,wBAAL,CAA8B,kBAA9B,CAAd;AACA,UAAK,eAAL,GAAuB,MAAK,OAAL,CAAa,eAAb,CAA6B,CAAC,GAAD,EAAM,GAAN,CAA7B,EAAyC,CAAC,GAAD,EAAM,GAAN,CAAzC,CAAvB,CATkD,CAWlD;;AACA,IAAA,aAAa,MAAb,UAAc,MAAK,KAAnB,4BAA6B,MAAK,MAAlC,IAA0C,MAAK,eAA/C,EAAgE,MAAK,MAArE;AACA,IAAA,aAAa,MAAb,UAAc,MAAK,KAAnB,4BAA6B,MAAK,MAAlC,IAA0C,MAAK,QAA/C;AAbkD;AAclD;AAED;;AAEG;;;AAjDJ;AAAA;AAAA,6CAkDkC,UAlDlC,EAkDsD;AAAA;;AACpD,UAAM,KAAK,GAAoB,UAAU,CAAC,GAAX,CAAe,UAAA,KAAK,EAAG;AACrD,YAAM,YAAY,GAAG,CAAC,CAAC,KAAK,GAAG,KAAT,EAAgB,CAAhB,EAAmB,CAAC,CAApB,CAAD,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAE,KAAK,GAAG,KAAV,CAAP,CAAzB,CAArB;AACA,eAAO,MAAI,CAAC,OAAL,CAAa,eAAb,CAA6B,YAAY,CAAC,CAAD,CAAzC,EAA8C,YAAY,CAAC,CAAD,CAA1D,CAAP;AACA,OAH8B,CAA/B;AAKA,aAAO,KAAP;AACA;AAzDF;AAAA;AAAA,8BA2DQ;AACN;;AACA,WAAK,KAAL,CAAW,OAAX;AACA,WAAK,MAAL,CAAY,OAAZ;AACA,WAAK,QAAL,CAAc,OAAd;;AACA,WAAK,MAAL,CAAY,OAAZ,CAAoB,UAAA,CAAC;AAAA,eAAI,CAAC,CAAC,UAAF,EAAJ;AAAA,OAArB;;AACA,WAAK,MAAL,CAAY,OAAZ,CAAoB,UAAA,CAAC;AAAA,eAAI,CAAC,CAAC,UAAF,EAAJ;AAAA,OAArB;;AACA,WAAK,eAAL,CAAqB,UAArB;;AACA,aAAO,IAAP;AACA;AApEF;;AAAA;AAAA,EAAuC,aAAvC","sourceRoot":"","sourcesContent":["import { Gain } from \"../../core/context/Gain\";\nimport { connectSeries, ToneAudioNode } from \"../../core/context/ToneAudioNode\";\n/**\n * PhaseShiftAllpass is an very efficient implementation of a Hilbert Transform\n * using two Allpass filter banks whose outputs have a phase difference of 90째.\n * Here the `offset90` phase is offset by +90째 in relation to `output`.\n * Coefficients and structure was developed by Olli Niemitalo.\n * For more details see: http://yehar.com/blog/?p=368\n * @category Component\n */\nexport class PhaseShiftAllpass extends ToneAudioNode {\n    constructor(options) {\n        super(options);\n        this.name = \"PhaseShiftAllpass\";\n        this.input = new Gain({ context: this.context });\n        /**\n         * The phase shifted output\n         */\n        this.output = new Gain({ context: this.context });\n        /**\n         * The PhaseShifted allpass output\n         */\n        this.offset90 = new Gain({ context: this.context });\n        const allpassBank1Values = [0.6923878, 0.9360654322959, 0.9882295226860, 0.9987488452737];\n        const allpassBank2Values = [0.4021921162426, 0.8561710882420, 0.9722909545651, 0.9952884791278];\n        this._bank0 = this._createAllPassFilterBank(allpassBank1Values);\n        this._bank1 = this._createAllPassFilterBank(allpassBank2Values);\n        this._oneSampleDelay = this.context.createIIRFilter([0.0, 1.0], [1.0, 0.0]);\n        // connect Allpass filter banks\n        connectSeries(this.input, ...this._bank0, this._oneSampleDelay, this.output);\n        connectSeries(this.input, ...this._bank1, this.offset90);\n    }\n    /**\n     * Create all of the IIR filters from an array of values using the coefficient calculation.\n     */\n    _createAllPassFilterBank(bankValues) {\n        const nodes = bankValues.map(value => {\n            const coefficients = [[value * value, 0, -1], [1, 0, -(value * value)]];\n            return this.context.createIIRFilter(coefficients[0], coefficients[1]);\n        });\n        return nodes;\n    }\n    dispose() {\n        super.dispose();\n        this.input.dispose();\n        this.output.dispose();\n        this.offset90.dispose();\n        this._bank0.forEach(f => f.disconnect());\n        this._bank1.forEach(f => f.disconnect());\n        this._oneSampleDelay.disconnect();\n        return this;\n    }\n}\n//# sourceMappingURL=PhaseShiftAllpass.js.map"]},"metadata":{},"sourceType":"module"}