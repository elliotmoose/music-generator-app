{"ast":null,"code":"var knowledge = require('./knowledge');\n\nvar Interval = require('./interval');\n\nvar scales = {\n  aeolian: ['P1', 'M2', 'm3', 'P4', 'P5', 'm6', 'm7'],\n  blues: ['P1', 'm3', 'P4', 'd5', 'P5', 'm7'],\n  chromatic: ['P1', 'm2', 'M2', 'm3', 'M3', 'P4', 'A4', 'P5', 'm6', 'M6', 'm7', 'M7'],\n  dorian: ['P1', 'M2', 'm3', 'P4', 'P5', 'M6', 'm7'],\n  doubleharmonic: ['P1', 'm2', 'M3', 'P4', 'P5', 'm6', 'M7'],\n  harmonicminor: ['P1', 'M2', 'm3', 'P4', 'P5', 'm6', 'M7'],\n  ionian: ['P1', 'M2', 'M3', 'P4', 'P5', 'M6', 'M7'],\n  locrian: ['P1', 'm2', 'm3', 'P4', 'd5', 'm6', 'm7'],\n  lydian: ['P1', 'M2', 'M3', 'A4', 'P5', 'M6', 'M7'],\n  majorpentatonic: ['P1', 'M2', 'M3', 'P5', 'M6'],\n  melodicminor: ['P1', 'M2', 'm3', 'P4', 'P5', 'M6', 'M7'],\n  minorpentatonic: ['P1', 'm3', 'P4', 'P5', 'm7'],\n  mixolydian: ['P1', 'M2', 'M3', 'P4', 'P5', 'M6', 'm7'],\n  phrygian: ['P1', 'm2', 'm3', 'P4', 'P5', 'm6', 'm7'],\n  wholetone: ['P1', 'M2', 'M3', 'A4', 'A5', 'A6']\n}; // synonyms\n\nscales.harmonicchromatic = scales.chromatic;\nscales.minor = scales.aeolian;\nscales.major = scales.ionian;\nscales.flamenco = scales.doubleharmonic;\n\nfunction Scale(tonic, scale) {\n  if (!(this instanceof Scale)) return new Scale(tonic, scale);\n  var scaleName, i;\n\n  if (!('coord' in tonic)) {\n    throw new Error('Invalid Tonic');\n  }\n\n  if (typeof scale === 'string') {\n    scaleName = scale;\n    scale = scales[scale];\n    if (!scale) throw new Error('Invalid Scale');\n  } else {\n    for (i in scales) {\n      if (scales.hasOwnProperty(i)) {\n        if (scales[i].toString() === scale.toString()) {\n          scaleName = i;\n          break;\n        }\n      }\n    }\n  }\n\n  this.name = scaleName;\n  this.tonic = tonic;\n  this.scale = scale;\n}\n\nScale.prototype = {\n  notes: function () {\n    var notes = [];\n\n    for (var i = 0, length = this.scale.length; i < length; i++) {\n      notes.push(this.tonic.interval(this.scale[i]));\n    }\n\n    return notes;\n  },\n  simple: function () {\n    return this.notes().map(function (n) {\n      return n.toString(true);\n    });\n  },\n  type: function () {\n    var length = this.scale.length - 2;\n\n    if (length < 8) {\n      return ['di', 'tri', 'tetra', 'penta', 'hexa', 'hepta', 'octa'][length] + 'tonic';\n    }\n  },\n  get: function (i) {\n    i = typeof i === 'string' && i in knowledge.stepNumber ? knowledge.stepNumber[i] : i;\n    return this.tonic.interval(this.scale[i - 1]);\n  },\n  solfege: function (index, showOctaves) {\n    if (index) return this.get(index).solfege(this, showOctaves);\n    return this.notes().map(function (n) {\n      return n.solfege(this, showOctaves);\n    });\n  },\n  interval: function (interval) {\n    interval = typeof interval === 'string' ? Interval.toCoord(interval) : interval;\n    return new Scale(this.tonic.interval(interval), this.scale);\n  },\n  transpose: function (interval) {\n    var scale = this.interval(interval);\n    this.scale = scale.scale;\n    this.tonic = scale.tonic;\n    return this;\n  }\n};\nmodule.exports = Scale;","map":{"version":3,"sources":["/Users/thebe/Desktop/music-generator-app/node_modules/teoria/lib/scale.js"],"names":["knowledge","require","Interval","scales","aeolian","blues","chromatic","dorian","doubleharmonic","harmonicminor","ionian","locrian","lydian","majorpentatonic","melodicminor","minorpentatonic","mixolydian","phrygian","wholetone","harmonicchromatic","minor","major","flamenco","Scale","tonic","scale","scaleName","i","Error","hasOwnProperty","toString","name","prototype","notes","length","push","interval","simple","map","n","type","get","stepNumber","solfege","index","showOctaves","toCoord","transpose","module","exports"],"mappings":"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","sourcesContent":["var knowledge = require('./knowledge');\nvar Interval = require('./interval');\n\nvar scales = {\n  aeolian: ['P1', 'M2', 'm3', 'P4', 'P5', 'm6', 'm7'],\n  blues: ['P1', 'm3', 'P4', 'd5', 'P5', 'm7'],\n  chromatic: ['P1', 'm2', 'M2', 'm3', 'M3', 'P4', 'A4', 'P5', 'm6', 'M6', 'm7', 'M7'],\n  dorian: ['P1', 'M2', 'm3', 'P4', 'P5', 'M6', 'm7'],\n  doubleharmonic: ['P1', 'm2', 'M3', 'P4', 'P5', 'm6', 'M7'],\n  harmonicminor: ['P1', 'M2', 'm3', 'P4', 'P5', 'm6', 'M7'],\n  ionian: ['P1', 'M2', 'M3', 'P4', 'P5', 'M6', 'M7'],\n  locrian: ['P1', 'm2', 'm3', 'P4', 'd5', 'm6', 'm7'],\n  lydian: ['P1', 'M2', 'M3', 'A4', 'P5', 'M6', 'M7'],\n  majorpentatonic: ['P1', 'M2', 'M3', 'P5', 'M6'],\n  melodicminor: ['P1', 'M2', 'm3', 'P4', 'P5', 'M6', 'M7'],\n  minorpentatonic: ['P1', 'm3', 'P4', 'P5', 'm7'],\n  mixolydian: ['P1', 'M2', 'M3', 'P4', 'P5', 'M6', 'm7'],\n  phrygian: ['P1', 'm2', 'm3', 'P4', 'P5', 'm6', 'm7'],\n  wholetone: ['P1', 'M2', 'M3', 'A4', 'A5', 'A6']\n}\n\n// synonyms\nscales.harmonicchromatic = scales.chromatic;\nscales.minor = scales.aeolian;\nscales.major = scales.ionian;\nscales.flamenco = scales.doubleharmonic;\n\nfunction Scale(tonic, scale) {\n  if (!(this instanceof Scale)) return new Scale(tonic, scale);\n  var scaleName, i;\n  if (!('coord' in tonic)) {\n    throw new Error('Invalid Tonic');\n  }\n\n  if (typeof scale === 'string') {\n    scaleName = scale;\n    scale = scales[scale];\n    if (!scale)\n      throw new Error('Invalid Scale');\n  } else {\n    for (i in scales) {\n      if (scales.hasOwnProperty(i)) {\n        if (scales[i].toString() === scale.toString()) {\n          scaleName = i;\n          break;\n        }\n      }\n    }\n  }\n\n  this.name = scaleName;\n  this.tonic = tonic;\n  this.scale = scale;\n}\n\nScale.prototype = {\n  notes: function() {\n    var notes = [];\n\n    for (var i = 0, length = this.scale.length; i < length; i++) {\n      notes.push(this.tonic.interval(this.scale[i]));\n    }\n\n    return notes;\n  },\n\n  simple: function() {\n    return this.notes().map(function(n) { return n.toString(true); });\n  },\n\n  type: function() {\n    var length = this.scale.length - 2;\n    if (length < 8) {\n      return ['di', 'tri', 'tetra', 'penta', 'hexa', 'hepta', 'octa'][length] +\n        'tonic';\n    }\n  },\n\n  get: function(i) {\n    i = (typeof i === 'string' && i in knowledge.stepNumber) ? knowledge.stepNumber[i] : i;\n\n    return this.tonic.interval(this.scale[i - 1]);\n  },\n\n  solfege: function(index, showOctaves) {\n    if (index)\n      return this.get(index).solfege(this, showOctaves);\n\n    return this.notes().map(function(n) {\n      return n.solfege(this, showOctaves);\n    });\n  },\n\n  interval: function(interval) {\n    interval = (typeof interval === 'string') ?\n      Interval.toCoord(interval) : interval;\n    return new Scale(this.tonic.interval(interval), this.scale);\n  },\n\n  transpose: function(interval) {\n    var scale = this.interval(interval);\n    this.scale = scale.scale;\n    this.tonic = scale.tonic;\n\n    return this;\n  }\n};\n\nmodule.exports = Scale;\n"]},"metadata":{},"sourceType":"script"}