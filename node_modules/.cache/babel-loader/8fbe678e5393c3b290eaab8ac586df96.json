{"ast":null,"code":"import _classCallCheck from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { AmplitudeEnvelope } from \"../component/envelope/AmplitudeEnvelope\";\nimport { Envelope } from \"../component/envelope/Envelope\";\nimport { Filter } from \"../component/filter/Filter\";\nimport { omitFromObject, optionsFromArguments } from \"../core/util/Defaults\";\nimport { readOnly } from \"../core/util/Interface\";\nimport { Monophonic } from \"../instrument/Monophonic\";\nimport { OmniOscillator } from \"../source/oscillator/OmniOscillator\";\nimport { Source } from \"../source/Source\";\nimport { FrequencyEnvelope } from \"../component/envelope/FrequencyEnvelope\";\nimport { ToneAudioNode } from \"../core/context/ToneAudioNode\";\n/**\n * MonoSynth is composed of one `oscillator`, one `filter`, and two `envelopes`.\n * The amplitude of the Oscillator and the cutoff frequency of the\n * Filter are controlled by Envelopes.\n * <img src=\"https://docs.google.com/drawings/d/1gaY1DF9_Hzkodqf8JI1Cg2VZfwSElpFQfI94IQwad38/pub?w=924&h=240\">\n * @example\n * const synth = new Tone.MonoSynth({\n * \toscillator: {\n * \t\ttype: \"square\"\n * \t},\n * \tenvelope: {\n * \t\tattack: 0.1\n * \t}\n * }).toDestination();\n * synth.triggerAttackRelease(\"C4\", \"8n\");\n * @category Instrument\n */\n\nexport var MonoSynth = /*#__PURE__*/function (_Monophonic) {\n  _inherits(MonoSynth, _Monophonic);\n\n  var _super = _createSuper(MonoSynth);\n\n  function MonoSynth() {\n    var _this;\n\n    _classCallCheck(this, MonoSynth);\n\n    _this = _super.call(this, optionsFromArguments(MonoSynth.getDefaults(), arguments));\n    _this.name = \"MonoSynth\";\n    var options = optionsFromArguments(MonoSynth.getDefaults(), arguments);\n    _this.oscillator = new OmniOscillator(Object.assign(options.oscillator, {\n      context: _this.context,\n      detune: options.detune,\n      onstop: function onstop() {\n        return _this.onsilence(_assertThisInitialized(_this));\n      }\n    }));\n    _this.frequency = _this.oscillator.frequency;\n    _this.detune = _this.oscillator.detune;\n    _this.filter = new Filter(Object.assign(options.filter, {\n      context: _this.context\n    }));\n    _this.filterEnvelope = new FrequencyEnvelope(Object.assign(options.filterEnvelope, {\n      context: _this.context\n    }));\n    _this.envelope = new AmplitudeEnvelope(Object.assign(options.envelope, {\n      context: _this.context\n    })); // connect the oscillators to the output\n\n    _this.oscillator.chain(_this.filter, _this.envelope, _this.output); // connect the filter envelope\n\n\n    _this.filterEnvelope.connect(_this.filter.frequency);\n\n    readOnly(_assertThisInitialized(_this), [\"oscillator\", \"frequency\", \"detune\", \"filter\", \"filterEnvelope\", \"envelope\"]);\n    return _this;\n  }\n\n  _createClass(MonoSynth, [{\n    key: \"_triggerEnvelopeAttack\",\n\n    /**\n     * start the attack portion of the envelope\n     * @param time the time the attack should start\n     * @param velocity the velocity of the note (0-1)\n     */\n    value: function _triggerEnvelopeAttack(time) {\n      var velocity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      this.envelope.triggerAttack(time, velocity);\n      this.filterEnvelope.triggerAttack(time);\n      this.oscillator.start(time);\n\n      if (this.envelope.sustain === 0) {\n        var computedAttack = this.toSeconds(this.envelope.attack);\n        var computedDecay = this.toSeconds(this.envelope.decay);\n        this.oscillator.stop(time + computedAttack + computedDecay);\n      }\n    }\n    /**\n     * start the release portion of the envelope\n     * @param time the time the release should start\n     */\n\n  }, {\n    key: \"_triggerEnvelopeRelease\",\n    value: function _triggerEnvelopeRelease(time) {\n      this.envelope.triggerRelease(time);\n      this.filterEnvelope.triggerRelease(time);\n      this.oscillator.stop(time + this.toSeconds(this.envelope.release));\n    }\n  }, {\n    key: \"getLevelAtTime\",\n    value: function getLevelAtTime(time) {\n      time = this.toSeconds(time);\n      return this.envelope.getValueAtTime(time);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      _get(_getPrototypeOf(MonoSynth.prototype), \"dispose\", this).call(this);\n\n      this.oscillator.dispose();\n      this.envelope.dispose();\n      this.filterEnvelope.dispose();\n      this.filter.dispose();\n      return this;\n    }\n  }], [{\n    key: \"getDefaults\",\n    value: function getDefaults() {\n      return Object.assign(Monophonic.getDefaults(), {\n        envelope: Object.assign(omitFromObject(Envelope.getDefaults(), Object.keys(ToneAudioNode.getDefaults())), {\n          attack: 0.005,\n          decay: 0.1,\n          release: 1,\n          sustain: 0.9\n        }),\n        filter: Object.assign(omitFromObject(Filter.getDefaults(), Object.keys(ToneAudioNode.getDefaults())), {\n          Q: 1,\n          rolloff: -12,\n          type: \"lowpass\"\n        }),\n        filterEnvelope: Object.assign(omitFromObject(FrequencyEnvelope.getDefaults(), Object.keys(ToneAudioNode.getDefaults())), {\n          attack: 0.6,\n          baseFrequency: 200,\n          decay: 0.2,\n          exponent: 2,\n          octaves: 3,\n          release: 2,\n          sustain: 0.5\n        }),\n        oscillator: Object.assign(omitFromObject(OmniOscillator.getDefaults(), Object.keys(Source.getDefaults())), {\n          type: \"sawtooth\"\n        })\n      });\n    }\n  }]);\n\n  return MonoSynth;\n}(Monophonic);","map":{"version":3,"sources":["../../../Tone/instrument/MonoSynth.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { AmplitudeEnvelope } from \"../component/envelope/AmplitudeEnvelope\";\nimport { Envelope } from \"../component/envelope/Envelope\";\nimport { Filter } from \"../component/filter/Filter\";\nimport { omitFromObject, optionsFromArguments } from \"../core/util/Defaults\";\nimport { readOnly } from \"../core/util/Interface\";\nimport { Monophonic } from \"../instrument/Monophonic\";\nimport { OmniOscillator } from \"../source/oscillator/OmniOscillator\";\nimport { Source } from \"../source/Source\";\nimport { FrequencyEnvelope } from \"../component/envelope/FrequencyEnvelope\";\nimport { ToneAudioNode } from \"../core/context/ToneAudioNode\";\n/**\n * MonoSynth is composed of one `oscillator`, one `filter`, and two `envelopes`.\n * The amplitude of the Oscillator and the cutoff frequency of the\n * Filter are controlled by Envelopes.\n * <img src=\"https://docs.google.com/drawings/d/1gaY1DF9_Hzkodqf8JI1Cg2VZfwSElpFQfI94IQwad38/pub?w=924&h=240\">\n * @example\n * const synth = new Tone.MonoSynth({\n * \toscillator: {\n * \t\ttype: \"square\"\n * \t},\n * \tenvelope: {\n * \t\tattack: 0.1\n * \t}\n * }).toDestination();\n * synth.triggerAttackRelease(\"C4\", \"8n\");\n * @category Instrument\n */\nexport class MonoSynth extends Monophonic {\n    constructor() {\n        super(optionsFromArguments(MonoSynth.getDefaults(), arguments));\n        this.name = \"MonoSynth\";\n        const options = optionsFromArguments(MonoSynth.getDefaults(), arguments);\n        this.oscillator = new OmniOscillator(Object.assign(options.oscillator, {\n            context: this.context,\n            detune: options.detune,\n            onstop: () => this.onsilence(this),\n        }));\n        this.frequency = this.oscillator.frequency;\n        this.detune = this.oscillator.detune;\n        this.filter = new Filter(Object.assign(options.filter, { context: this.context }));\n        this.filterEnvelope = new FrequencyEnvelope(Object.assign(options.filterEnvelope, { context: this.context }));\n        this.envelope = new AmplitudeEnvelope(Object.assign(options.envelope, { context: this.context }));\n        // connect the oscillators to the output\n        this.oscillator.chain(this.filter, this.envelope, this.output);\n        // connect the filter envelope\n        this.filterEnvelope.connect(this.filter.frequency);\n        readOnly(this, [\"oscillator\", \"frequency\", \"detune\", \"filter\", \"filterEnvelope\", \"envelope\"]);\n    }\n    static getDefaults() {\n        return Object.assign(Monophonic.getDefaults(), {\n            envelope: Object.assign(omitFromObject(Envelope.getDefaults(), Object.keys(ToneAudioNode.getDefaults())), {\n                attack: 0.005,\n                decay: 0.1,\n                release: 1,\n                sustain: 0.9,\n            }),\n            filter: Object.assign(omitFromObject(Filter.getDefaults(), Object.keys(ToneAudioNode.getDefaults())), {\n                Q: 1,\n                rolloff: -12,\n                type: \"lowpass\",\n            }),\n            filterEnvelope: Object.assign(omitFromObject(FrequencyEnvelope.getDefaults(), Object.keys(ToneAudioNode.getDefaults())), {\n                attack: 0.6,\n                baseFrequency: 200,\n                decay: 0.2,\n                exponent: 2,\n                octaves: 3,\n                release: 2,\n                sustain: 0.5,\n            }),\n            oscillator: Object.assign(omitFromObject(OmniOscillator.getDefaults(), Object.keys(Source.getDefaults())), {\n                type: \"sawtooth\",\n            }),\n        });\n    }\n    /**\n     * start the attack portion of the envelope\n     * @param time the time the attack should start\n     * @param velocity the velocity of the note (0-1)\n     */\n    _triggerEnvelopeAttack(time, velocity = 1) {\n        this.envelope.triggerAttack(time, velocity);\n        this.filterEnvelope.triggerAttack(time);\n        this.oscillator.start(time);\n        if (this.envelope.sustain === 0) {\n            const computedAttack = this.toSeconds(this.envelope.attack);\n            const computedDecay = this.toSeconds(this.envelope.decay);\n            this.oscillator.stop(time + computedAttack + computedDecay);\n        }\n    }\n    /**\n     * start the release portion of the envelope\n     * @param time the time the release should start\n     */\n    _triggerEnvelopeRelease(time) {\n        this.envelope.triggerRelease(time);\n        this.filterEnvelope.triggerRelease(time);\n        this.oscillator.stop(time + this.toSeconds(this.envelope.release));\n    }\n    getLevelAtTime(time) {\n        time = this.toSeconds(time);\n        return this.envelope.getValueAtTime(time);\n    }\n    dispose() {\n        super.dispose();\n        this.oscillator.dispose();\n        this.envelope.dispose();\n        this.filterEnvelope.dispose();\n        this.filter.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=MonoSynth.js.map"]},"metadata":{},"sourceType":"module"}