{"ast":null,"code":"import _classCallCheck from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/thebe/Desktop/music-generator-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Monophonic } from \"./Monophonic\";\nimport { MonoSynth } from \"./MonoSynth\";\nimport { Signal } from \"../signal/Signal\";\nimport { readOnly } from \"../core/util/Interface\";\nimport { LFO } from \"../source/oscillator/LFO\";\nimport { Gain } from \"../core/context/Gain\";\nimport { Multiply } from \"../signal/Multiply\";\nimport { deepMerge, omitFromObject, optionsFromArguments } from \"../core/util/Defaults\";\n/**\n * DuoSynth is a monophonic synth composed of two [[MonoSynths]] run in parallel with control over the\n * frequency ratio between the two voices and vibrato effect.\n * @example\n * const duoSynth = new Tone.DuoSynth().toDestination();\n * duoSynth.triggerAttackRelease(\"C4\", \"2n\");\n * @category Instrument\n */\n\nexport var DuoSynth = /*#__PURE__*/function (_Monophonic) {\n  _inherits(DuoSynth, _Monophonic);\n\n  var _super = _createSuper(DuoSynth);\n\n  function DuoSynth() {\n    var _this;\n\n    _classCallCheck(this, DuoSynth);\n\n    _this = _super.call(this, optionsFromArguments(DuoSynth.getDefaults(), arguments));\n    _this.name = \"DuoSynth\";\n    var options = optionsFromArguments(DuoSynth.getDefaults(), arguments);\n    _this.voice0 = new MonoSynth(Object.assign(options.voice0, {\n      context: _this.context,\n      onsilence: function onsilence() {\n        return _this.onsilence(_assertThisInitialized(_this));\n      }\n    }));\n    _this.voice1 = new MonoSynth(Object.assign(options.voice1, {\n      context: _this.context\n    }));\n    _this.harmonicity = new Multiply({\n      context: _this.context,\n      units: \"positive\",\n      value: options.harmonicity\n    });\n    _this._vibrato = new LFO({\n      frequency: options.vibratoRate,\n      context: _this.context,\n      min: -50,\n      max: 50\n    }); // start the vibrato immediately\n\n    _this._vibrato.start();\n\n    _this.vibratoRate = _this._vibrato.frequency;\n    _this._vibratoGain = new Gain({\n      context: _this.context,\n      units: \"normalRange\",\n      gain: options.vibratoAmount\n    });\n    _this.vibratoAmount = _this._vibratoGain.gain;\n    _this.frequency = new Signal({\n      context: _this.context,\n      units: \"frequency\",\n      value: 440\n    });\n    _this.detune = new Signal({\n      context: _this.context,\n      units: \"cents\",\n      value: options.detune\n    }); // control the two voices frequency\n\n    _this.frequency.connect(_this.voice0.frequency);\n\n    _this.frequency.chain(_this.harmonicity, _this.voice1.frequency);\n\n    _this._vibrato.connect(_this._vibratoGain);\n\n    _this._vibratoGain.fan(_this.voice0.detune, _this.voice1.detune);\n\n    _this.detune.fan(_this.voice0.detune, _this.voice1.detune);\n\n    _this.voice0.connect(_this.output);\n\n    _this.voice1.connect(_this.output);\n\n    readOnly(_assertThisInitialized(_this), [\"voice0\", \"voice1\", \"frequency\", \"vibratoAmount\", \"vibratoRate\"]);\n    return _this;\n  }\n\n  _createClass(DuoSynth, [{\n    key: \"getLevelAtTime\",\n    value: function getLevelAtTime(time) {\n      time = this.toSeconds(time);\n      return this.voice0.envelope.getValueAtTime(time) + this.voice1.envelope.getValueAtTime(time);\n    }\n  }, {\n    key: \"_triggerEnvelopeAttack\",\n\n    /**\n     * Trigger the attack portion of the note\n     */\n    value: function _triggerEnvelopeAttack(time, velocity) {\n      // @ts-ignore\n      this.voice0._triggerEnvelopeAttack(time, velocity); // @ts-ignore\n\n\n      this.voice1._triggerEnvelopeAttack(time, velocity);\n    }\n    /**\n     * Trigger the release portion of the note\n     */\n\n  }, {\n    key: \"_triggerEnvelopeRelease\",\n    value: function _triggerEnvelopeRelease(time) {\n      // @ts-ignore\n      this.voice0._triggerEnvelopeRelease(time); // @ts-ignore\n\n\n      this.voice1._triggerEnvelopeRelease(time);\n\n      return this;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      _get(_getPrototypeOf(DuoSynth.prototype), \"dispose\", this).call(this);\n\n      this.voice0.dispose();\n      this.voice1.dispose();\n      this.frequency.dispose();\n      this.detune.dispose();\n\n      this._vibrato.dispose();\n\n      this.vibratoRate.dispose();\n\n      this._vibratoGain.dispose();\n\n      this.harmonicity.dispose();\n      return this;\n    }\n  }], [{\n    key: \"getDefaults\",\n    value: function getDefaults() {\n      return deepMerge(Monophonic.getDefaults(), {\n        vibratoAmount: 0.5,\n        vibratoRate: 5,\n        harmonicity: 1.5,\n        voice0: deepMerge(omitFromObject(MonoSynth.getDefaults(), Object.keys(Monophonic.getDefaults())), {\n          filterEnvelope: {\n            attack: 0.01,\n            decay: 0.0,\n            sustain: 1,\n            release: 0.5\n          },\n          envelope: {\n            attack: 0.01,\n            decay: 0.0,\n            sustain: 1,\n            release: 0.5\n          }\n        }),\n        voice1: deepMerge(omitFromObject(MonoSynth.getDefaults(), Object.keys(Monophonic.getDefaults())), {\n          filterEnvelope: {\n            attack: 0.01,\n            decay: 0.0,\n            sustain: 1,\n            release: 0.5\n          },\n          envelope: {\n            attack: 0.01,\n            decay: 0.0,\n            sustain: 1,\n            release: 0.5\n          }\n        })\n      });\n    }\n  }]);\n\n  return DuoSynth;\n}(Monophonic);","map":{"version":3,"sources":["../../../Tone/instrument/DuoSynth.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { Monophonic } from \"./Monophonic\";\nimport { MonoSynth } from \"./MonoSynth\";\nimport { Signal } from \"../signal/Signal\";\nimport { readOnly } from \"../core/util/Interface\";\nimport { LFO } from \"../source/oscillator/LFO\";\nimport { Gain, } from \"../core/context/Gain\";\nimport { Multiply } from \"../signal/Multiply\";\nimport { deepMerge, omitFromObject, optionsFromArguments } from \"../core/util/Defaults\";\n/**\n * DuoSynth is a monophonic synth composed of two [[MonoSynths]] run in parallel with control over the\n * frequency ratio between the two voices and vibrato effect.\n * @example\n * const duoSynth = new Tone.DuoSynth().toDestination();\n * duoSynth.triggerAttackRelease(\"C4\", \"2n\");\n * @category Instrument\n */\nexport class DuoSynth extends Monophonic {\n    constructor() {\n        super(optionsFromArguments(DuoSynth.getDefaults(), arguments));\n        this.name = \"DuoSynth\";\n        const options = optionsFromArguments(DuoSynth.getDefaults(), arguments);\n        this.voice0 = new MonoSynth(Object.assign(options.voice0, {\n            context: this.context,\n            onsilence: () => this.onsilence(this)\n        }));\n        this.voice1 = new MonoSynth(Object.assign(options.voice1, {\n            context: this.context,\n        }));\n        this.harmonicity = new Multiply({\n            context: this.context,\n            units: \"positive\",\n            value: options.harmonicity,\n        });\n        this._vibrato = new LFO({\n            frequency: options.vibratoRate,\n            context: this.context,\n            min: -50,\n            max: 50\n        });\n        // start the vibrato immediately\n        this._vibrato.start();\n        this.vibratoRate = this._vibrato.frequency;\n        this._vibratoGain = new Gain({\n            context: this.context,\n            units: \"normalRange\",\n            gain: options.vibratoAmount\n        });\n        this.vibratoAmount = this._vibratoGain.gain;\n        this.frequency = new Signal({\n            context: this.context,\n            units: \"frequency\",\n            value: 440\n        });\n        this.detune = new Signal({\n            context: this.context,\n            units: \"cents\",\n            value: options.detune\n        });\n        // control the two voices frequency\n        this.frequency.connect(this.voice0.frequency);\n        this.frequency.chain(this.harmonicity, this.voice1.frequency);\n        this._vibrato.connect(this._vibratoGain);\n        this._vibratoGain.fan(this.voice0.detune, this.voice1.detune);\n        this.detune.fan(this.voice0.detune, this.voice1.detune);\n        this.voice0.connect(this.output);\n        this.voice1.connect(this.output);\n        readOnly(this, [\"voice0\", \"voice1\", \"frequency\", \"vibratoAmount\", \"vibratoRate\"]);\n    }\n    getLevelAtTime(time) {\n        time = this.toSeconds(time);\n        return this.voice0.envelope.getValueAtTime(time) + this.voice1.envelope.getValueAtTime(time);\n    }\n    static getDefaults() {\n        return deepMerge(Monophonic.getDefaults(), {\n            vibratoAmount: 0.5,\n            vibratoRate: 5,\n            harmonicity: 1.5,\n            voice0: deepMerge(omitFromObject(MonoSynth.getDefaults(), Object.keys(Monophonic.getDefaults())), {\n                filterEnvelope: {\n                    attack: 0.01,\n                    decay: 0.0,\n                    sustain: 1,\n                    release: 0.5\n                },\n                envelope: {\n                    attack: 0.01,\n                    decay: 0.0,\n                    sustain: 1,\n                    release: 0.5\n                }\n            }),\n            voice1: deepMerge(omitFromObject(MonoSynth.getDefaults(), Object.keys(Monophonic.getDefaults())), {\n                filterEnvelope: {\n                    attack: 0.01,\n                    decay: 0.0,\n                    sustain: 1,\n                    release: 0.5\n                },\n                envelope: {\n                    attack: 0.01,\n                    decay: 0.0,\n                    sustain: 1,\n                    release: 0.5\n                }\n            }),\n        });\n    }\n    /**\n     * Trigger the attack portion of the note\n     */\n    _triggerEnvelopeAttack(time, velocity) {\n        // @ts-ignore\n        this.voice0._triggerEnvelopeAttack(time, velocity);\n        // @ts-ignore\n        this.voice1._triggerEnvelopeAttack(time, velocity);\n    }\n    /**\n     * Trigger the release portion of the note\n     */\n    _triggerEnvelopeRelease(time) {\n        // @ts-ignore\n        this.voice0._triggerEnvelopeRelease(time);\n        // @ts-ignore\n        this.voice1._triggerEnvelopeRelease(time);\n        return this;\n    }\n    dispose() {\n        super.dispose();\n        this.voice0.dispose();\n        this.voice1.dispose();\n        this.frequency.dispose();\n        this.detune.dispose();\n        this._vibrato.dispose();\n        this.vibratoRate.dispose();\n        this._vibratoGain.dispose();\n        this.harmonicity.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=DuoSynth.js.map"]},"metadata":{},"sourceType":"module"}