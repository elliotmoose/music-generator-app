{"code":"(this[\"webpackJsonpmusic-generator-app\"]=this[\"webpackJsonpmusic-generator-app\"]||[]).push([[0],{25:function(e,t,n){},27:function(e,t,n){},45:function(e,t,n){\"use strict\";n.r(t);var a=n(8),r=n(6),i=n.n(r),c=n(18),o=n.n(c),s=(n(25),n(2)),u=n.n(s),l=n(3),p=n(4),f=(n(27),n(5)),m=n(0),d=n(1),b=n(11),h=n(19),j=function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,[{key:\"setup\",value:function(){b.c(),this.sampler=new b.a({urls:{C1:\"C1.mp3\",C2:\"C2.mp3\",C3:\"C3.mp3\",C4:\"C4.mp3\",\"D#4\":\"Ds4.mp3\",\"F#4\":\"Fs4.mp3\",A4:\"A4.mp3\",C5:\"C5.mp3\",C6:\"C6.mp3\"},baseUrl:\"https://tonejs.github.io/audio/salamander/\"}).toDestination()}},{key:\"notesFromMidiFile\",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,i,c,o,s,l,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Midi.fromUrl(\"/\"+t);case 2:n=e.sent,console.log(n),a=[],r=0,i=Object(f.a)(n.tracks);try{for(i.s();!(c=i.n()).done;){o=c.value,s=Object(f.a)(o.notes);try{for(s.s();!(l=s.n()).done;)p=l.value,console.log(\"add note: \"+p.name),r+=p.time,p.objTime=r,a.push(p)}catch(u){s.e(u)}finally{s.f()}}}catch(u){i.e(u)}finally{i.f()}return e.abrupt(\"return\",a);case 9:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"playMidiFile\",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.notesFromMidiFile(t);case 2:n=e.sent,a=Object(f.a)(n);try{for(a.s();!(r=a.n()).done;)i=r.value,this.sampler.triggerAttackRelease([i.name],i.duration,i.time,i.velocity),console.log(\"play note: \"+i.name)}catch(c){a.e(c)}finally{a.f()}case 5:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var v=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(new j),o=Object(p.a)(c,2),s=o[0],f=o[1],m=Object(r.useState)([]),d=Object(p.a)(m,2),h=d[0],v=d[1],O=Object(r.useState)(0),g=Object(p.a)(O,2),y=g[0],C=g[1];Object(r.useEffect)((function(){s.setup(),f(s),setInterval((function(){C(b.b.currentTime*F)}),10)}),[]),Object(r.useEffect)((function(){n&&(Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,s.notesFromMidiFile(\"ABeautifulFriendship.mid\");case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=7,s.playMidiFile(\"ABeautifulFriendship.mid\");case 7:case\"end\":return e.stop()}}),e)})))(),i(!1))}),[n]);var F=100;return Object(a.jsxs)(\"div\",{className:\"App\",children:[Object(a.jsx)(\"button\",{onClick:function(){return i(!0)},children:\"begin\"}),h.map((function(e,t){var n=\"\".concat(e.name);return Object(a.jsx)(\"div\",{style:{position:\"absolute\",left:e.time*F-y,top:1820-20*e.midi,width:e.duration*F,height:20,backgroundColor:\"tomato\"},children:n},\"\".concat(t))}))]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById(\"root\")),O()}},[[45,1,2]]]);","name":"static/js/main.3f8e964b.chunk.js","map":{"version":3,"sources":["static/js/main.3f8e964b.chunk.js"],"names":["this","push","25","module","exports","__webpack_require__","27","45","__webpack_exports__","r","jsx_runtime","react","react_default","n","react_dom","react_dom_default","regenerator","regenerator_default","asyncToGenerator","slicedToArray","createForOfIteratorHelper","classCallCheck","createClass","esm","Midi","Player_Player","Player","Object","key","value","sampler","urls","C1","C2","C3","C4","D#4","F#4","A4","C5","C6","baseUrl","toDestination","_notesFromMidiFile","a","mark","_callee","fileName","midi","notes","objTime","_iterator","_step","track","_iterator2","_step2","note","wrap","_context","prev","next","fromUrl","sent","console","log","tracks","s","done","name","time","err","e","f","abrupt","stop","_x","apply","arguments","_playMidiFile","_callee2","_iterator3","_step3","_context2","notesFromMidiFile","triggerAttackRelease","duration","velocity","_x2","src_App","_useState","_useState2","play","setPlay","_useState3","_useState4","player","setPlayer","_useState5","_useState6","setNotes","_useState7","_useState8","playheadTime","setPlayheadTime","setup","setInterval","currentTime","DURATION_FACTOR","t0","t1","playMidiFile","className","children","onClick","map","i","noteDescription","concat","style","position","left","top","MAX_MIDI","width","height","backgroundColor","src_reportWebVitals","onPerfEntry","Function","then","bind","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpmusic-generator-app\"] = this[\"webpackJsonpmusic-generator-app\"] || []).push([[0],{\n\n/***/ 25:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 27:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 45:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(6);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(18);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(2);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(3);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(27);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\nvar createForOfIteratorHelper = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/tone/build/esm/index.js + 930 modules\nvar esm = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/@tonejs/midi/dist/Midi.js\nvar Midi = __webpack_require__(19);\n\n// CONCATENATED MODULE: ./src/Player.js\nvar Player_i=0;var Player_Player=/*#__PURE__*/function(){function Player(){Object(classCallCheck[\"a\" /* default */])(this,Player);}Object(createClass[\"a\" /* default */])(Player,[{key:\"setup\",value:function setup(){esm[\"c\" /* start */]();this.sampler=new esm[\"a\" /* Sampler */]({urls:{\"C1\":\"C1.mp3\",\"C2\":\"C2.mp3\",\"C3\":\"C3.mp3\",\"C4\":\"C4.mp3\",\"D#4\":\"Ds4.mp3\",\"F#4\":\"Fs4.mp3\",\"A4\":\"A4.mp3\",\"C5\":\"C5.mp3\",\"C6\":\"C6.mp3\"},baseUrl:\"https://tonejs.github.io/audio/salamander/\"}).toDestination();}},{key:\"notesFromMidiFile\",value:function(){var _notesFromMidiFile=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(fileName){var midi,notes,objTime,_iterator,_step,track,_iterator2,_step2,note;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Midi[\"Midi\"].fromUrl(\"/\"+fileName);case 2:midi=_context.sent;console.log(midi);notes=[];objTime=0;_iterator=Object(createForOfIteratorHelper[\"a\" /* default */])(midi.tracks);try{for(_iterator.s();!(_step=_iterator.n()).done;){track=_step.value;_iterator2=Object(createForOfIteratorHelper[\"a\" /* default */])(track.notes);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){note=_step2.value;console.log('add note: '+note.name);objTime+=note.time;note.objTime=objTime;notes.push(note);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return _context.abrupt(\"return\",notes);case 9:case\"end\":return _context.stop();}}},_callee);}));function notesFromMidiFile(_x){return _notesFromMidiFile.apply(this,arguments);}return notesFromMidiFile;}()},{key:\"playMidiFile\",value:function(){var _playMidiFile=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(fileName){var notes,_iterator3,_step3,note;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.notesFromMidiFile(fileName);case 2:notes=_context2.sent;_iterator3=Object(createForOfIteratorHelper[\"a\" /* default */])(notes);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){note=_step3.value;this.sampler.triggerAttackRelease([note.name],note.duration,note.time,note.velocity);console.log('play note: '+note.name);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function playMidiFile(_x2){return _playMidiFile.apply(this,arguments);}return playMidiFile;}()}]);return Player;}();\n// CONCATENATED MODULE: ./src/App.js\nvar interval;function App_App(){var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),play=_useState2[0],setPlay=_useState2[1];var _useState3=Object(react[\"useState\"])(new Player_Player()),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),player=_useState4[0],setPlayer=_useState4[1];var _useState5=Object(react[\"useState\"])([]),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),notes=_useState6[0],setNotes=_useState6[1];var _useState7=Object(react[\"useState\"])(0),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),playheadTime=_useState8[0],setPlayheadTime=_useState8[1];Object(react[\"useEffect\"])(function(){player.setup();setPlayer(player);if(!interval){setInterval(function(){setPlayheadTime(esm[\"b\" /* context */].currentTime*DURATION_FACTOR);},10);}},[]);Object(react[\"useEffect\"])(function(){if(play){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=setNotes;_context.next=3;return player.notesFromMidiFile('ABeautifulFriendship.mid');case 3:_context.t1=_context.sent;(0,_context.t0)(_context.t1);_context.next=7;return player.playMidiFile('ABeautifulFriendship.mid');case 7:case\"end\":return _context.stop();}}},_callee);}))();setPlay(false);}},[play]);var MAX_MIDI=91;var NOTE_HEIGHT=20;var DURATION_FACTOR=100;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"App\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:function onClick(){return setPlay(true);},children:\"begin\"}),notes.map(function(note,i){// const noteDescription = `${note.name} note: ${note.midi} dur:${note.duration} time:${note.time}`\nvar noteDescription=\"\".concat(note.name);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{position:'absolute',left:note.time*DURATION_FACTOR-playheadTime,top:MAX_MIDI*NOTE_HEIGHT-note.midi*NOTE_HEIGHT,width:note.duration*DURATION_FACTOR,height:NOTE_HEIGHT,backgroundColor:'tomato'},children:noteDescription},\"\".concat(i));})]});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/reportWebVitals.js\nvar reportWebVitals=function reportWebVitals(onPerfEntry){if(onPerfEntry&&onPerfEntry instanceof Function){__webpack_require__.e(/* import() */ 3).then(__webpack_require__.bind(null, 46)).then(function(_ref){var getCLS=_ref.getCLS,getFID=_ref.getFID,getFCP=_ref.getFCP,getLCP=_ref.getLCP,getTTFB=_ref.getTTFB;getCLS(onPerfEntry);getFID(onPerfEntry);getFCP(onPerfEntry);getLCP(onPerfEntry);getTTFB(onPerfEntry);});}};/* harmony default export */ var src_reportWebVitals = (reportWebVitals);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nsrc_reportWebVitals();\n\n/***/ })\n\n},[[45,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/thebe/Desktop/music-generator-app/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/thebe/Desktop/music-generator-app/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/thebe/Desktop/music-generator-app/node_modules/postcss-loader/src/index.js??postcss!/Users/thebe/Desktop/music-generator-app/src/index.css","/Users/thebe/Desktop/music-generator-app/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/thebe/Desktop/music-generator-app/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/thebe/Desktop/music-generator-app/node_modules/postcss-loader/src/index.js??postcss!/Users/thebe/Desktop/music-generator-app/src/App.css","/Users/thebe/Desktop/music-generator-app/src/Player.js","/Users/thebe/Desktop/music-generator-app/src/App.js","/Users/thebe/Desktop/music-generator-app/src/reportWebVitals.js","/Users/thebe/Desktop/music-generator-app/src/index.js"],"names":["i","Player","Tone","sampler","urls","baseUrl","toDestination","fileName","Midi","fromUrl","midi","console","log","notes","objTime","tracks","track","note","name","time","push","notesFromMidiFile","triggerAttackRelease","duration","velocity","interval","App","useState","play","setPlay","player","setPlayer","setNotes","playheadTime","setPlayheadTime","useEffect","setup","setInterval","currentTime","DURATION_FACTOR","playMidiFile","MAX_MIDI","NOTE_HEIGHT","map","noteDescription","position","left","top","width","height","backgroundColor","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":";;;;;AAAA,uC;;;;;;;ACAA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGA,GAAIA,SAAC,CAAG,CAAR,C,GACqBC,c,qLACT,CACJC,oBAAA,GACA,KAAKC,OAAL,CAAe,GAAID,uBAAJ,CAAiB,CAC5BE,IAAI,CAAE,CACF,KAAM,QADJ,CAEF,KAAM,QAFJ,CAGF,KAAM,QAHJ,CAIF,KAAM,QAJJ,CAKF,MAAO,SALL,CAMF,MAAO,SANL,CAOF,KAAM,QAPJ,CAQF,KAAM,QARJ,CASF,KAAM,QATJ,CADsB,CAY5BC,OAAO,CAAE,4CAZmB,CAAjB,EAaZC,aAbY,EAAf,CAcH,C,wKAEuBC,Q,8MACDC,aAAI,CAACC,OAAL,CAAa,IAAMF,QAAnB,C,QAAbG,I,eACNC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACIG,K,CAAQ,E,CACRC,O,CAAU,C,gEACIJ,IAAI,CAACK,M,MAAvB,+CAA+B,CAAtBC,KAAsB,6EACVA,KAAK,CAACH,KADI,MAC3B,kDAA8B,CAArBI,IAAqB,cAC1BN,OAAO,CAACC,GAAR,CAAY,aAAeK,IAAI,CAACC,IAAhC,EACAJ,OAAO,EAAIG,IAAI,CAACE,IAAhB,CACAF,IAAI,CAACH,OAAL,CAAeA,OAAf,CACAD,KAAK,CAACO,IAAN,CAAWH,IAAX,EACH,CAN0B,uDAO9B,C,qFAGMJ,K,sUAEQN,Q,gLACG,MAAKc,iBAAL,CAAuBd,QAAvB,C,QAAdM,K,gFACaA,K,MAAjB,kDAAwB,CAAfI,IAAe,cACpB,KAAKd,OAAL,CAAamB,oBAAb,CAAkC,CAACL,IAAI,CAACC,IAAN,CAAlC,CAA+CD,IAAI,CAACM,QAApD,CAA8DN,IAAI,CAACE,IAAnE,CAAyEF,IAAI,CAACO,QAA9E,EACAb,OAAO,CAACC,GAAR,CAAY,cAAgBK,IAAI,CAACC,IAAjC,EACH,C;;ACzCT,GAAIO,SAAJ,CACA,QAASC,QAAT,EAAe,eACWC,yBAAQ,CAAC,KAAD,CADnB,kEACNC,IADM,eACAC,OADA,8BAEeF,yBAAQ,CAAC,GAAI1B,cAAJ,EAAD,CAFvB,mEAEN6B,MAFM,eAEEC,SAFF,8BAGaJ,yBAAQ,CAAC,EAAD,CAHrB,mEAGNd,KAHM,eAGCmB,QAHD,8BAI2BL,yBAAQ,CAAC,CAAD,CAJnC,mEAINM,YAJM,eAIQC,eAJR,eAMbC,0BAAS,CAAC,UAAM,CACdL,MAAM,CAACM,KAAP,GACAL,SAAS,CAACD,MAAD,CAAT,CAEA,GAAI,CAACL,QAAL,CAAe,CACbY,WAAW,CAAC,UAAM,CAChBH,eAAe,CAAChC,sBAAA,CAAaoC,WAAb,CAA2BC,eAA5B,CAAf,CACD,CAFU,CAER,EAFQ,CAAX,CAGD,CACF,CATQ,CASN,EATM,CAAT,CAWAJ,0BAAS,CAAC,UAAM,CACd,GAAIP,IAAJ,CAAU,CAER,oFAAC,iJACCI,QADD,uBACgBF,OAAM,CAACT,iBAAP,CAAyB,0BAAzB,CADhB,qFAEOS,OAAM,CAACU,YAAP,CAAoB,0BAApB,CAFP,uDAAD,KAKAX,OAAO,CAAC,KAAD,CAAP,CACD,CACF,CAVQ,CAUN,CAACD,IAAD,CAVM,CAAT,CAYA,GAAMa,SAAQ,CAAG,EAAjB,CACA,GAAMC,YAAW,CAAG,EAApB,CACA,GAAMH,gBAAe,CAAG,GAAxB,CAIA,mBACE,mCAAK,SAAS,CAAC,KAAf,wBACE,qCAAQ,OAAO,CAAE,yBAAMV,QAAO,CAAC,IAAD,CAAb,EAAjB,mBADF,CAGGhB,KAAK,CAAC8B,GAAN,CAAU,SAAC1B,IAAD,CAAOjB,CAAP,CAAa,CACtB;AACA,GAAM4C,gBAAe,WAAM3B,IAAI,CAACC,IAAX,CAArB,CACA,mBAAO,kCAEL,KAAK,CAAE,CAAE2B,QAAQ,CAAE,UAAZ,CAAwBC,IAAI,CAAE7B,IAAI,CAACE,IAAL,CAAYoB,eAAZ,CAA8BN,YAA5D,CAA0Ec,GAAG,CAAEN,QAAQ,CAAGC,WAAX,CAAyBzB,IAAI,CAACP,IAAL,CAAYgC,WAApH,CAAiIM,KAAK,CAAE/B,IAAI,CAACM,QAAL,CAAgBgB,eAAxJ,CAAyKU,MAAM,CAAEP,WAAjL,CAA8LQ,eAAe,CAAE,QAA/M,CAFF,UAGLN,eAHK,YACG5C,CADH,EAAP,CAID,CAPA,CAHH,GADF,CAeD,CAEc0B,mDAAf,E;;ACzDA,GAAMyB,gBAAe,CAAG,QAAlBA,gBAAkB,CAAAC,WAAW,CAAI,CACrC,GAAIA,WAAW,EAAIA,WAAW,WAAYC,SAA1C,CAAoD,CAClD,iFAAqBC,IAArB,CAA0B,cAAiD,IAA9CC,OAA8C,MAA9CA,MAA8C,CAAtCC,MAAsC,MAAtCA,MAAsC,CAA9BC,MAA8B,MAA9BA,MAA8B,CAAtBC,MAAsB,MAAtBA,MAAsB,CAAdC,OAAc,MAAdA,OAAc,CACzEJ,MAAM,CAACH,WAAD,CAAN,CACAI,MAAM,CAACJ,WAAD,CAAN,CACAK,MAAM,CAACL,WAAD,CAAN,CACAM,MAAM,CAACN,WAAD,CAAN,CACAO,OAAO,CAACP,WAAD,CAAP,CACD,CAND,EAOD,CACF,CAVD,CAYeD,uEAAf,E;;ACNAS,mBAAQ,CAACC,MAAT,cACE,2BAAC,eAAD,CAAO,UAAP,wBACE,2BAAC,OAAD,IADF,EADF,CAIEC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAJF,EAOA;AACA;AACA;AACAZ,mBAAe,G","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import * as Tone from 'tone'\nimport { Midi } from '@tonejs/midi'\n\nlet i = 0\nexport default class Player {\n    setup() {\n        Tone.start()\n        this.sampler = new Tone.Sampler({\n            urls: {\n                \"C1\": \"C1.mp3\",\n                \"C2\": \"C2.mp3\",\n                \"C3\": \"C3.mp3\",\n                \"C4\": \"C4.mp3\",\n                \"D#4\": \"Ds4.mp3\",\n                \"F#4\": \"Fs4.mp3\",\n                \"A4\": \"A4.mp3\",\n                \"C5\": \"C5.mp3\",\n                \"C6\": \"C6.mp3\",\n            },\n            baseUrl: \"https://tonejs.github.io/audio/salamander/\",\n        }).toDestination()\n    }\n\n    async notesFromMidiFile(fileName) {\n        const midi = await Midi.fromUrl(\"/\" + fileName);\n        console.log(midi)\n        let notes = []\n        let objTime = 0\n        for (let track of midi.tracks) {\n            for (let note of track.notes) {\n                console.log('add note: ' + note.name)\n                objTime += note.time;\n                note.objTime = objTime;\n                notes.push(note);\n            }\n        }\n\n        \n        return notes\n    }\n    async playMidiFile(fileName) {\n        let notes = await this.notesFromMidiFile(fileName)\n        for (let note of notes) {\n            this.sampler.triggerAttackRelease([note.name], note.duration, note.time, note.velocity);\n            console.log('play note: ' + note.name)\n        }\n\n    }\n    \n}","import './App.css';\nimport { useEffect, useState } from 'react'\nimport Player from './Player';\nimport * as Tone from 'tone'\nlet interval;\nfunction App() {\n  const [play, setPlay] = useState(false)\n  const [player, setPlayer] = useState(new Player());\n  const [notes, setNotes] = useState([]);\n  const [playheadTime, setPlayheadTime] = useState(0);\n\n  useEffect(() => {\n    player.setup();\n    setPlayer(player);\n    \n    if (!interval) {\n      setInterval(() => {\n        setPlayheadTime(Tone.context.currentTime * DURATION_FACTOR)\n      }, 10);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (play) {\n\n      (async () => {\n        setNotes(await player.notesFromMidiFile('ABeautifulFriendship.mid'));\n        await player.playMidiFile('ABeautifulFriendship.mid');\n      })()\n\n      setPlay(false);\n    }\n  }, [play])\n\n  const MAX_MIDI = 91\n  const NOTE_HEIGHT = 20\n  const DURATION_FACTOR = 100\n\n\n\n  return (\n    <div className=\"App\">\n      <button onClick={() => setPlay(true)}>begin</button>\n      {/* <div style={{height: '100%', width: 4, position: 'absolute', left: playheadTime, top: 0, backgroundColor: 'black', transition: '0.2s', zIndex: 999}}/> */}\n      {notes.map((note, i) => {\n        // const noteDescription = `${note.name} note: ${note.midi} dur:${note.duration} time:${note.time}`\n        const noteDescription = `${note.name}`\n        return <div\n          key={`${i}`}\n          style={{ position: 'absolute', left: note.time * DURATION_FACTOR - playheadTime, top: MAX_MIDI * NOTE_HEIGHT - note.midi * NOTE_HEIGHT, width: note.duration * DURATION_FACTOR, height: NOTE_HEIGHT, backgroundColor: 'tomato' }}\n        >{noteDescription}</div>\n      }\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"]}}